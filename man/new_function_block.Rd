% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/function_block.R
\name{new_function_block}
\alias{new_function_block}
\title{Function Transform Block}
\usage{
new_function_block(fn = "function(data, n = 6L) { utils::head(data, n) }", ...)
}
\arguments{
\item{fn}{Character string containing R function code that transforms a data
frame. The function must have \code{data} as first argument. Default values of
other arguments determine the UI widgets.}

\item{...}{Additional arguments passed to new_block}
}
\description{
A block that wraps a user-defined R function and automatically generates
UI based on the function's argument defaults.
}
\section{Approach}{

The function must have \code{data} as its first argument (the input data frame).
Additional arguments are introspected and UI is generated based on defaults:
\itemize{
\item Character vector with multiple elements -> selectInput (dropdown)
\item Single numeric value -> numericInput
\item Single logical value -> checkboxInput
\item Single character value -> textInput
}
}

\section{Output Types}{

Output type is auto-detected from the function's return value (in priority order):
\itemize{
\item \code{gt_tbl}: renders as GT HTML table
\item \code{ggplot}: renders with plotOutput/renderPlot
\item \code{recordedplot} (base R plot): renders with evaluate::replay() in renderPlot
\item \code{data.frame}/\code{tibble}: renders as interactive DataTable
\item Any other object: shows print() output as preformatted text
}
}

\examples{
# Define a simple filter function (renders as DataTable)
blk <- new_function_block(
  fn = "function(data, species = c('setosa', 'versicolor', 'virginica')) {
    dplyr::filter(data, Species == species)
  }"
)

# Function returning GT object (auto-detected, renders as GT)
blk_gt <- new_function_block(
  fn = "function(data, title = 'My Table') {
    gt::gt(data) |> gt::tab_header(title = title)
  }"
)

}
