% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/function_var_block.R
\name{new_function_var_block}
\alias{new_function_var_block}
\title{Function Variadic Transform Block}
\usage{
new_function_var_block(fn = "function(...) { dplyr::bind_rows(...) }", ...)
}
\arguments{
\item{fn}{Character string containing R function code that transforms multiple
data frames. The function must have \code{...} as first argument. Default values
of other arguments determine the UI widgets.}

\item{...}{Additional arguments passed to new_block}
}
\description{
A block that wraps a user-defined R function with variadic data inputs (...)
and automatically generates UI based on the function's argument defaults.
Similar to \code{\link[=new_function_block]{new_function_block()}} but accepts any number of data frames.
}
\section{Approach}{

The function must have \code{...} as its first argument to receive the input
data frames. Additional arguments after \code{...} are introspected and UI is
generated based on defaults:
\itemize{
\item Character vector with multiple elements -> selectInput (dropdown)
\item Single numeric value -> numericInput
\item Single logical value -> checkboxInput
\item Single character value -> textInput
}
}

\section{Output Types}{

Output type is auto-detected from the function's return value (in priority order):
\itemize{
\item \code{gt_tbl}: renders as GT HTML table
\item \code{ggplot}: renders with plotOutput/renderPlot
\item \code{recordedplot} (base R plot): renders with evaluate::replay() in renderPlot
\item \code{data.frame}/\code{tibble}: renders as interactive DataTable
\item Any other object: shows print() output as preformatted text
}
}

\examples{
# Define a simple bind function
blk <- new_function_var_block(
  fn = "function(..., .id = NULL) {
    dplyr::bind_rows(..., .id = .id)
  }"
)

if (interactive()) {
  library(blockr.core)

  serve(
    new_board(
      blocks = list(
        data1 = new_dataset_block(dataset = "band_members", package = "dplyr"),
        data2 = new_dataset_block(dataset = "band_instruments", package = "dplyr"),
        data3 = new_dataset_block(dataset = "band_instruments2", package = "dplyr"),
        merged = new_function_var_block(
          fn = "function(..., by = 'id') {
            dfs <- list(...)
            Reduce(function(x, y) merge(x, y, by = by, all = TRUE), dfs)
          }"
        )
      ),
      links = links(
        from = c("data1", "data2", "data3"),
        to = c("merged", "merged", "merged"),
        input = c("1", "2", "3")
      )
    )
  )
}

}
